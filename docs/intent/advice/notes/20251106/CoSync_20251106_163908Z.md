# CoSync — Handoff to CoPrime (guard invariants)

**Repo:** rickballard/CoSteward  
**When (UTC):** 20251106_163908Z

## Context
Guard runs were failing to appear as `workflow_dispatch` because the workflow file was missing on `main` and the dispatch ref could not be aligned (likely branch protection). Console attempts produced empty run IDs and polluted journal attempts.

## What remains (owner: CoPrime)
- [ ] Ensure `.github/workflows/guard-helpers.yml` exists on **main** with:
  - `on: pull_request` (opened/synchronize/reopened/edited) **and** `workflow_dispatch`
  - Job-level gate: `if: ${{ github.event_name == 'pull_request' || github.event_name == 'workflow_dispatch' }}`
  - Emits markers: “BPOE guard”, “Helper Evolution: ok”, “Routing via CoOps: ok”, “Not exported/referenced: ok”
- [ ] Actions settings: repository Actions enabled; `workflow_dispatch` not blocked by org policy.
- [ ] Choose dispatch target:
  - EITHER dispatch on **main**, or
  - Maintain branch `test/guard-v2-selfcheck` and relax protections enough to fast-align it to `main` when needed.
- [ ] Add `guard-selfcheck.yml` CI to hard-fail PRs if:
  - guard file missing, or has `push:`, or lacks the job-level `if:` gate.
- [ ] Add CODEOWNERS entry for `.github/workflows/**` to require review.
- [ ] Journal writer: skip append if `runId` is empty or `event` ≠ `workflow_dispatch`/`pull_request`.

## After fixes (verify once)
1) Trigger `workflow_dispatch` on chosen branch.  
2) Confirm job appears and markers are present.  
3) Append valid journal row (event, status, headSha).

— Handoff prepared by CoSync.
